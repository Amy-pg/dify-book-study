app:
  description: ã“ã®ã‚¢ãƒ—ãƒªã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç›®çš„ã«å¿œã˜ã¦å‡¦ç†ã‚’è‡ªå‹•ã§åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹å¤šæ©Ÿèƒ½æ–‡æ›¸å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚IF/ELSEãƒãƒ¼ãƒ‰ã§æ–‡æ›¸æ ¡æ­£ã¨å ±å‘Šæ›¸ä½œæˆã®2ã¤ã®å‡¦ç†ã‚’åˆ†å²ã•ã›ã€å¤‰æ•°é›†ç´„ãƒãƒ¼ãƒ‰ã§çµæœã‚’çµ±åˆã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒãƒ¼ãƒ‰ã§å‡ºåŠ›ã‚’æ•´å½¢ã—ã¾ã™ã€‚1ã¤ã®ã‚¢ãƒ—ãƒªã§è¤‡æ•°ã®ç›®çš„ã«å¯¾å¿œã§ãã‚‹æŸ”è»Ÿãªè¨­è¨ˆã¨ãªã£ã¦ã„ã¾ã™ã€‚
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: ãƒãƒ«ãƒæ–‡æ›¸ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
  use_icon_as_answer_icon: false
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/openai:0.0.7@11ec0b1909200f62b6ebf2cec1da981a9071d11c1ee0e2ef332ce89bcffa2544
kind: app
version: 0.2.0
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: start
        targetType: if-else
      id: 1746347247104-source-1746347341107-target
      source: '1746347247104'
      sourceHandle: source
      target: '1746347341107'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1746347341107-true-1746347434716-target
      source: '1746347341107'
      sourceHandle: 'true'
      target: '1746347434716'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: if-else
        targetType: llm
      id: 1746347341107-ae05b59f-d18f-4a3e-a35b-89510933a079-1746347501422-target
      source: '1746347341107'
      sourceHandle: ae05b59f-d18f-4a3e-a35b-89510933a079
      target: '1746347501422'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1746347434716-source-1746347548589-target
      source: '1746347434716'
      sourceHandle: source
      target: '1746347548589'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInLoop: false
        sourceType: llm
        targetType: variable-aggregator
      id: 1746347501422-source-1746347548589-target
      source: '1746347501422'
      sourceHandle: source
      target: '1746347548589'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: variable-aggregator
        targetType: template-transform
      id: 1746347548589-source-1746347645712-target
      source: '1746347548589'
      sourceHandle: source
      target: '1746347645712'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        isInLoop: false
        sourceType: template-transform
        targetType: end
      id: 1746347645712-source-1746347910220-target
      source: '1746347645712'
      sourceHandle: source
      target: '1746347910220'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: ''
        selected: false
        title: é–‹å§‹
        type: start
        variables:
        - label: æ§‹æˆã—ãŸã„æ–‡æ›¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„
          max_length: 10000
          options: []
          required: true
          type: paragraph
          variable: input_text
        - label: å‡¦ç†ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„
          max_length: 48
          options:
          - æ–‡æ›¸ã®æ ¡æ­£ã‚’ã™ã‚‹
          - å ±å‘Šæ›¸ã‚’ä½œæˆã™ã‚‹
          required: true
          type: select
          variable: document_type
      height: 114
      id: '1746347247104'
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: contains
            id: 2e5257fd-42a6-4468-8042-fb8f99f9d706
            value: æ ¡æ­£
            varType: string
            variable_selector:
            - '1746347247104'
            - document_type
          id: 'true'
          logical_operator: and
        - case_id: ae05b59f-d18f-4a3e-a35b-89510933a079
          conditions:
          - comparison_operator: contains
            id: 6503765b-99fe-44c4-8cb9-2536e89285b0
            value: å ±å‘Šæ›¸
            varType: string
            variable_selector:
            - '1746347247104'
            - document_type
          logical_operator: and
        desc: ''
        selected: false
        title: IF/ELSE
        type: if-else
      height: 172
      id: '1746347341107'
      position:
        x: 383
        y: 282
      positionAbsolute:
        x: 383
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: gpt-4-turbo
          provider: langgenius/openai/openai
        prompt_template:
        - id: b6b426bd-1cff-4420-8062-7a0f5421b261
          role: system
          text: "ã‚ãªãŸã¯ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸ã®æ ¡æ­£ã¨æ”¹å–„ã‚’è¡Œã†å°‚é–€å®¶ã§ã™ã€‚\nå…¥åŠ›ã•ã‚ŒãŸæ–‡æ›¸ã«å¯¾ã—ã¦ä»¥ä¸‹ã®è¦³ç‚¹ã§åˆ†æã¨æ”¹å–„ã‚’è¡Œã£ã¦ãã ã•ã„ï¼š\n\n1.\
            \ æ–‡æ›¸æ§‹æˆã®é©åˆ‡æ€§\n   - æ–‡æ›¸ã®ç¨®é¡ã«å¿œã˜ãŸå¿…è¦ãªè¦ç´ ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹\n   - å†…å®¹ã®é †åºã‚„æ®µè½ã®åŒºåˆ‡ã‚Šã¯é©åˆ‡ã‹\n   - ç®‡æ¡æ›¸ããªã©ã®æ›¸å¼ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n\
            \n2. æ–‡ä½“ã®ä¸€è²«æ€§\n   - æ–‡æœ«è¡¨ç¾ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n   - æ•¬èªã®ä½¿ã„æ–¹ã¯é©åˆ‡ã‹\n   - å…¨ä½“çš„ãªæ–‡ä½“ã¯ä¸€è²«ã—ã¦ã„ã‚‹ã‹\n\
            \n3. ãƒ“ã‚¸ãƒã‚¹æ–‡æ›¸ã¨ã—ã¦ã®è¡¨ç¾ã®é©åˆ‡ã•\n   - é©åˆ‡ãªæ•¬èªã‚„ä¸å¯§ãªè¡¨ç¾ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹\n   - å£èªçš„ãªè¡¨ç¾ã‚„ä¸é©åˆ‡ãªè¨€ã„å›ã—ã¯ãªã„ã‹\n\
            \   - æ›–æ˜§ãªè¡¨ç¾ã‚„ä¸é©åˆ‡ãªçœç•¥ã¯ãªã„ã‹\n\n4. èª¤å­—è„±å­—ã‚„æ–‡æ³•ã®å•é¡Œ\n   - æ¼¢å­—ã‚„ã²ã‚‰ãŒãªã®ä½¿ã„åˆ†ã‘ã¯é©åˆ‡ã‹\n   - åŒã˜è¨€è‘‰ã®è¡¨è¨˜ã¯çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹ã‹\n\
            \   - å¥èª­ç‚¹ã®ä½¿ã„æ–¹ã¯é©åˆ‡ã‹\n\n5. åˆ†ã‹ã‚Šã‚„ã™ã•ã€ç°¡æ½”ã•\n   - æ–‡ç« ã®æµã‚Œã¯åˆ†ã‹ã‚Šã‚„ã™ã„ã‹\n   - ä¸å¿…è¦ãªé‡è¤‡ã‚„å†—é•·ãªè¡¨ç¾ã¯ãªã„ã‹\n\
            \   - é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯æ˜ç¢ºã«ä¼ã‚ã‚‹ã‹\n\n### ç¾åœ¨ã®æ–‡æ›¸\n{{#1746347247104.input_text#}}\n\n\
            ### åˆ†æ\nä¸Šè¨˜ã®å„è¦³ç‚¹ã«ã¤ã„ã¦ã€å•é¡Œç‚¹ã‚’ç®‡æ¡æ›¸ãã§ç¤ºã—ã¾ã™ã€‚\n\n### æ”¹å–„æ¡ˆ\nå•é¡Œç‚¹ã‚’ä¿®æ­£ã—ãŸæ–‡æ›¸ã‚’ç¤ºã—ã¾ã™ã€‚\n\n###\
            \ è§£èª¬\nä¸»ãªä¿®æ­£ã®ãƒã‚¤ãƒ³ãƒˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚"
        selected: false
        title: æ ¡æ­£ç”¨LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 88
      id: '1746347434716'
      position:
        x: 686
        y: 282
      positionAbsolute:
        x: 686
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params: {}
          mode: chat
          name: gpt-4-turbo
          provider: langgenius/openai/openai
        prompt_template:
        - id: 78b6209e-1a60-4071-95a4-53f689728faa
          role: system
          text: 'ã‚ãªãŸã¯å ±å‘Šæ›¸ä½œæˆã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ã‚’æŒã¤å ±å‘Šæ›¸ã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š


            - ç°¡æ½”ãªè¦ç´„ã‚’å†’é ­ã«é…ç½®

            - ç›®çš„ã€æ–¹æ³•ã€çµæœã€è€ƒå¯Ÿã®æ˜ç¢ºãªåŒºåˆ†ã‘

            - ãƒ‡ãƒ¼ã‚¿ã‚„äº‹å®Ÿã«åŸºã¥ãå®¢è¦³çš„ãªè¨˜è¿°

            - å…·ä½“çš„ãªæ•°å€¤ã‚„ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹ã®æ´»ç”¨

            - ç°¡æ½”ã§æ˜ç­ãªæ–‡ç« è¡¨ç¾

            - æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚„æè¨€ã®æ˜ç¤º


            ### å ±å‘Šæ›¸ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

            1. ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

            2. èƒŒæ™¯ã¨ç›®çš„

            3. å†…å®¹è©³ç´°

            4. çµè«–ã¨æè¨€


            ### å…ƒã®æ–‡ç« 

            {{#1746347247104.input_text#}}'
        selected: false
        title: å ±å‘Šæ›¸ç”¨LLM
        type: llm
        variables: []
        vision:
          enabled: false
      height: 88
      id: '1746347501422'
      position:
        x: 686
        y: 409
      positionAbsolute:
        x: 686
        y: 409
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        advanced_settings:
          group_enabled: false
          groups:
          - groupId: 096908e9-54bc-40c6-8e41-0e098a7983ed
            group_name: Group1
            output_type: string
            variables:
            - - '1746347434716'
              - text
            - - '1746347501422'
              - text
        desc: ''
        output_type: string
        selected: false
        title: å¤‰æ•°é›†ç´„å™¨
        type: variable-aggregator
        variables:
        - - '1746347434716'
          - text
        - - '1746347501422'
          - text
      height: 129
      id: '1746347548589'
      position:
        x: 989
        y: 282
      positionAbsolute:
        x: 989
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        selected: false
        template: "{% if document_type == \"æ–‡æ›¸ã®æ ¡æ­£ã‚’ã™ã‚‹\" %}\r\n# æ–‡æ›¸æ ¡æ­£çµæœ\r\n\r\n## ã‚ªãƒªã‚¸ãƒŠãƒ«æ–‡æ›¸\r\
          \n{{content}}\r\n\r\n## æ ¡æ­£çµæœ\r\n{{llm_output}}\r\n\r\n---\r\nâ€»ä¸Šè¨˜ã®æ ¡æ­£çµæœã¯ AI\
          \ ã«ã‚ˆã‚‹ææ¡ˆã§ã™ã€‚\r\næ–‡è„ˆã‚„æ„å›³ã«å¿œã˜ã¦é©åˆ‡ã«åˆ¤æ–­ã—ã¦ãã ã•ã„ã€‚\r\n\r\n{% else %}\r\n# å ±å‘Šæ›¸ä½œæˆçµæœ\r\n\r\
          \n{{llm_output}}\r\n\r\n---\r\nâ€»ã“ã®å ±å‘Šæ›¸ã¯ AI ã«ã‚ˆã‚Šè‡ªå‹•ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚\r\nå†…å®¹ã®ç¢ºèªã¨å¿…è¦ã«å¿œã˜ãŸç·¨é›†ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚\r\
          \n{% endif %}"
        title: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
        type: template-transform
        variables:
        - value_selector:
          - '1746347548589'
          - output
          variable: llm_output
        - value_selector:
          - '1746347247104'
          - input_text
          variable: content
        - value_selector:
          - '1746347247104'
          - document_type
          variable: document_type
      height: 52
      id: '1746347645712'
      position:
        x: 1292
        y: 282
      positionAbsolute:
        x: 1292
        y: 282
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1746347645712'
          - output
          variable: template_output
        selected: false
        title: çµ‚äº†
        type: end
      height: 88
      id: '1746347910220'
      position:
        x: 1595
        y: 282
      positionAbsolute:
        x: 1595
        y: 282
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 243
    viewport:
      x: -1168
      y: 201.5
      zoom: 1
